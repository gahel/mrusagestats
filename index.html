<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MacBook Usage Analytics - Real-time Monitoring</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto; background: #0d1117; color: #c9d1d9; line-height: 1.5; }
        .container { max-width: 1600px; margin: 0 auto; padding: 20px; }
        
        header { background: linear-gradient(135deg, #161b22 0%, #0d1117 100%); padding: 40px; border-radius: 12px; margin-bottom: 30px; border: 1px solid #30363d; }
        h1 { color: #58a6ff; margin-bottom: 15px; font-size: 2.5rem; font-weight: 700; }
        .subtitle { color: #8b949e; font-size: 1.1rem; margin-bottom: 20px; }
        .timestamp { color: #7c3aed; font-size: 0.9rem; background: rgba(124, 58, 237, 0.1); padding: 8px 16px; border-radius: 20px; display: inline-block; }
        
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .metric-card { background: #161b22; padding: 25px; border-radius: 12px; border: 1px solid #30363d; position: relative; overflow: hidden; }
        .metric-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #58a6ff, #7c3aed); }
        .metric-label { color: #8b949e; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
        .metric-value { color: #58a6ff; font-size: 2.2rem; font-weight: bold; margin-bottom: 8px; }
        .metric-change { font-size: 0.9rem; }
        .metric-up { color: #f85149; }
        .metric-down { color: #3fb950; }
        
        .charts-section { margin-bottom: 40px; }
        .section-title { color: #58a6ff; font-size: 1.8rem; margin-bottom: 25px; display: flex; align-items: center; gap: 12px; }
        .section-title::before { content: 'üìä'; font-size: 1.5rem; }
        
        .charts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 25px; margin-bottom: 30px; }
        .chart-container { background: #161b22; padding: 25px; border-radius: 12px; border: 1px solid #30363d; position: relative; }
        .chart-title { color: #f0f6fc; font-size: 1.2rem; font-weight: 600; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .chart-canvas { position: relative; height: 300px; }
        
        .alerts-section { background: #161b22; border-radius: 12px; padding: 25px; margin-bottom: 30px; border: 1px solid #30363d; }
        .alert { padding: 15px; margin: 10px 0; border-radius: 8px; display: flex; align-items: center; gap: 12px; }
        .alert-critical { background: rgba(248, 81, 73, 0.1); border: 1px solid #f85149; }
        .alert-warning { background: rgba(255, 212, 59, 0.1); border: 1px solid #ffd43b; }
        .alert-icon { font-size: 1.2rem; }
        
        .machines-table { background: #161b22; border-radius: 12px; overflow: hidden; margin-bottom: 30px; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #0d1117; color: #58a6ff; padding: 18px; text-align: left; font-weight: 600; border-bottom: 2px solid #30363d; cursor: pointer; user-select: none; position: relative; }
        th:hover { background: #161b22; }
        th.sortable:after { content: ' ‚ÜïÔ∏è'; opacity: 0.5; }
        th.sort-asc:after { content: ' ‚¨ÜÔ∏è'; opacity: 1; }
        th.sort-desc:after { content: ' ‚¨áÔ∏è'; opacity: 1; }
        td { padding: 15px 18px; border-bottom: 1px solid #30363d; }
        tr:hover { background: #0d1117; }
        .status-nominal { color: #3fb950; }
        .status-warning { color: #ffd43b; }
        .status-critical { color: #f85149; }
        .high-power { background: rgba(248, 181, 73, 0.15); }
        .high-gpu { background: rgba(124, 58, 237, 0.15); }
        
        .hostname-cell { display: inline-flex; align-items: center; gap: 8px; position: relative; }
        .copy-btn { background: #238636; color: #fff; border: none; padding: 4px 10px; border-radius: 6px; cursor: pointer; font-size: 0.75rem; opacity: 0; transition: opacity 0.2s, background 0.2s; white-space: nowrap; }
        .hostname-cell:hover .copy-btn { opacity: 1; }
        .copy-btn:hover { background: #2da043; }
        .copy-btn.copied { background: #3fb950; }
        
        .footer { text-align: center; padding: 40px; color: #8b949e; border-top: 1px solid #30363d; margin-top: 40px; }
        .update-frequency { color: #7c3aed; font-weight: 600; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üñ•Ô∏è MacBook Fleet Analytics</h1>
            <div class="subtitle">Real-time monitoring of 108 MacBooks across the organization</div>
            <div class="timestamp">Last updated: 2026-01-09 10:05:28 UTC</div>
        </header>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">Total Data Points</div>
                <div class="metric-value">4,125</div>
                <div class="metric-change">üìà Growing continuously</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Active Machines</div>
                <div class="metric-value">108</div>
                <div class="metric-change">üü¢ All monitored</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Peak Power Usage</div>
                <div class="metric-value">23.4W</div>
                <div class="metric-change">‚ö° Max observed</div>
            </div>            <div class="metric-card">
                <div class="metric-label">Thermal Alerts</div>
                <div class="metric-value">0</div>
                <div class="metric-change metric-down">
                    ‚úÖ All normal
                </div>
            </div>
        </div>
        <div class="charts-section">
            <h2 class="section-title">Performance Trends Over Time</h2>
            
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">üå°Ô∏è Thermal Pressure Timeline</div>
                    <div class="chart-canvas">
                        <canvas id="thermalTrendChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">‚ö° Power Consumption Trends</div>
                    <div class="chart-canvas">
                        <canvas id="powerTrendChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">üéÆ GPU Utilization Over Time</div>
                    <div class="chart-canvas">
                        <canvas id="gpuTrendChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">‚öôÔ∏è Load Average</div>
                    <div class="chart-canvas">
                        <canvas id="cpuLoadChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="machines-table">
            <h2 class="section-title">üîù Top 3 by Load Average (1-min)</h2>
            <table>
                <thead>
                    <tr>
                        <th>Machine</th>
                        <th>Load (1-min)</th>
                        <th>Load (5-min)</th>
                        <th>Load (15-min)</th>
                        <th>CPU Usage (%)</th>
                        <th>Thermal</th>
                        <th>Last Seen</th>
                    </tr>
                </thead>
                <tbody>
                <tr>
                    <td><div class="hostname-cell"><strong>MBP-14219</strong><button class="copy-btn" onclick="copyToClipboard("MBP-14219", this)">Copy</button></div></td>
                    <td>279.24</td>
                    <td>165.32</td>
                    <td>70.68</td>
                    <td>61.2%</td>
                    <td class="status-nominal">Nominal</td>
                    <td>2026-01-05 14:43</td>
                </tr>
                <tr>
                    <td><div class="hostname-cell"><strong>MBP-26833</strong><button class="copy-btn" onclick="copyToClipboard("MBP-26833", this)">Copy</button></div></td>
                    <td>190.08</td>
                    <td>68.36</td>
                    <td>26.61</td>
                    <td>96.7%</td>
                    <td class="status-nominal">Nominal</td>
                    <td>2026-01-01 13:14</td>
                </tr>
                <tr>
                    <td><div class="hostname-cell"><strong>MBP-27348</strong><button class="copy-btn" onclick="copyToClipboard("MBP-27348", this)">Copy</button></div></td>
                    <td>122.13</td>
                    <td>63.35</td>
                    <td>26.33</td>
                    <td>76.7%</td>
                    <td class="status-nominal">Nominal</td>
                    <td>2025-11-27 13:15</td>
                </tr>
                </tbody>
            </table>
        </div>
        
        <div class="charts-section">
            <h2 class="section-title">üìä Thermal & CPU Metrics</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">üå°Ô∏è Non-Nominal Thermal States</div>
                    <div class="chart-canvas">
                        <canvas id="thermalChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <div class="chart-title">üìä Average CPU Usage Over Time</div>
                    <div class="chart-canvas">
                        <canvas id="cpuChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="alerts-section">
            <h2 class="section-title">üö® System Alerts</h2>
            <div class="alert" style="background: rgba(63, 185, 80, 0.1); border: 1px solid #3fb950;">
                <span class="alert-icon">‚úÖ</span>
                <div>
                    <strong>Fleet Status: Healthy</strong> All systems operating within normal parameters.
                    No immediate action required.
                </div>
            </div>
        </div>
    </div>

<script>
// Chart.js configuration
Chart.defaults.color = '#8b949e';
Chart.defaults.borderColor = '#30363d';
Chart.defaults.backgroundColor = 'rgba(88, 166, 255, 0.1)';

// Time series data
const timeSeriesData = [{"time": "2026-01-07T21:30", "avg_watts": 1.7789730166666669, "avg_gpu": 0.09900372222222222, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-07T21:50", "avg_watts": 1.7533204161574074, "avg_gpu": 0.09840471759259259, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 216, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-07T22:00", "avg_watts": 1.8082836296296296, "avg_gpu": 0.0971459074074074, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-07T22:10", "avg_watts": 1.8001588518518519, "avg_gpu": 0.0971459074074074, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-07T22:19", "avg_watts": 1.8001588518518519, "avg_gpu": 0.0971459074074074, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-07T23:10", "avg_watts": 1.8302320435185184, "avg_gpu": 0.09559940740740741, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T00:50", "avg_watts": 1.8589502824074073, "avg_gpu": 0.09817111111111111, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T02:50", "avg_watts": 1.7890412351851852, "avg_gpu": 0.09602239814814816, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T03:56", "avg_watts": 1.7905183277777779, "avg_gpu": 0.09612167592592592, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T04:33", "avg_watts": 1.783583337037037, "avg_gpu": 0.09636848148148147, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T05:15", "avg_watts": 1.8655551944444444, "avg_gpu": 0.09739692592592591, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T06:17", "avg_watts": 1.9158619907407408, "avg_gpu": 0.09902379629629629, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T07:15", "avg_watts": 1.9440742166666667, "avg_gpu": 0.09321018518518517, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T08:15", "avg_watts": 2.6361424481481484, "avg_gpu": 0.12408397962962964, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T09:17", "avg_watts": 2.7303097750000003, "avg_gpu": 0.11073057407407408, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T10:12", "avg_watts": 2.7628789694444444, "avg_gpu": 0.1331279611111111, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T11:11", "avg_watts": 2.286778725, "avg_gpu": 0.1323830861111111, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T12:21", "avg_watts": 2.204737286111111, "avg_gpu": 0.16461976203703704, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T13:02", "avg_watts": 2.2566082006481483, "avg_gpu": 0.15908119722222225, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 0, "thermal_issues": 0, "count": 108, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T14:18", "avg_watts": 2.354920692818182, "avg_gpu": 0.1679331, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 26.798636363636362, "thermal_issues": 0, "count": 110, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T14:30", "avg_watts": 2.364414729181818, "avg_gpu": 0.16583511818181818, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 26.573545454545453, "thermal_issues": 0, "count": 110, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T15:14", "avg_watts": 2.040995432818182, "avg_gpu": 0.1659133090909091, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 24.922636363636357, "thermal_issues": 0, "count": 110, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T16:15", "avg_watts": 2.0844118588073397, "avg_gpu": 0.16287325688073392, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 25.506788990825683, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T17:17", "avg_watts": 1.971655923027523, "avg_gpu": 0.15797049541284403, "avg_load_short": 0, "avg_load_middle": 0, "avg_load_long": 0, "avg_cpu_usage": 25.037706422018346, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T18:03", "avg_watts": 2.0102502542201837, "avg_gpu": 0.14916777064220185, "avg_load_short": 14.369908256880734, "avg_load_middle": 8.557706422018349, "avg_load_long": 5.681100917431193, "avg_cpu_usage": 25.000183486238527, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T18:14", "avg_watts": 2.0395766120183487, "avg_gpu": 0.15034508256880733, "avg_load_short": 13.89376146788991, "avg_load_middle": 8.393853211009175, "avg_load_long": 5.6039449541284405, "avg_cpu_usage": 25.09752293577982, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T18:29", "avg_watts": 2.045552575321101, "avg_gpu": 0.15207890825688072, "avg_load_short": 13.909449541284404, "avg_load_middle": 8.4148623853211, "avg_load_long": 5.622201834862386, "avg_cpu_usage": 25.09229357798165, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T18:54", "avg_watts": 2.0456142542201836, "avg_gpu": 0.15306060550458717, "avg_load_short": 14.375963302752293, "avg_load_middle": 8.823394495412844, "avg_load_long": 5.869633027522935, "avg_cpu_usage": 25.108256880733947, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T19:11", "avg_watts": 2.0340011349541283, "avg_gpu": 0.1531271376146789, "avg_load_short": 14.379357798165138, "avg_load_middle": 8.821651376146788, "avg_load_long": 5.864495412844037, "avg_cpu_usage": 25.178165137614684, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T19:15", "avg_watts": 2.0340011349541283, "avg_gpu": 0.1531271376146789, "avg_load_short": 14.379357798165138, "avg_load_middle": 8.821651376146788, "avg_load_long": 5.864495412844037, "avg_cpu_usage": 25.178165137614684, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T19:36", "avg_watts": 2.0393522175229357, "avg_gpu": 0.1512439633027523, "avg_load_short": 14.33862385321101, "avg_load_middle": 8.760183486238532, "avg_load_long": 5.822568807339449, "avg_cpu_usage": 25.127889908256876, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T19:53", "avg_watts": 2.040829242293578, "avg_gpu": 0.14865612844036696, "avg_load_short": 13.90724770642202, "avg_load_middle": 8.303577981651376, "avg_load_long": 5.525504587155963, "avg_cpu_usage": 25.08100917431193, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T20:02", "avg_watts": 1.975261123027523, "avg_gpu": 0.14265238532110092, "avg_load_short": 14.84348623853211, "avg_load_middle": 8.952844036697249, "avg_load_long": 5.97908256880734, "avg_cpu_usage": 24.932293577981653, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T20:11", "avg_watts": 1.9675351413761466, "avg_gpu": 0.1419177247706422, "avg_load_short": 14.864128440366972, "avg_load_middle": 8.963853211009173, "avg_load_long": 5.978990825688074, "avg_cpu_usage": 24.975504587155967, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T20:13", "avg_watts": 1.9694135358715597, "avg_gpu": 0.14196966972477063, "avg_load_short": 14.867798165137616, "avg_load_middle": 8.961100917431192, "avg_load_long": 5.976880733944954, "avg_cpu_usage": 25.076238532110096, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T20:26", "avg_watts": 1.8908468019266054, "avg_gpu": 0.1396144128440367, "avg_load_short": 13.859724770642202, "avg_load_middle": 8.575412844036698, "avg_load_long": 5.82697247706422, "avg_cpu_usage": 24.595045871559634, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}, {"time": "2026-01-08T20:42", "avg_watts": 1.8286601202752293, "avg_gpu": 0.1390343119266055, "avg_load_short": 13.561743119266055, "avg_load_middle": 8.558990825688072, "avg_load_long": 5.837981651376147, "avg_cpu_usage": 24.12513761467889, "thermal_issues": 0, "count": 109, "top3_machines": [{"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}, {"hostname": null, "load_short": 0, "load_middle": 0, "load_long": 0}]}];

// Thermal trend chart
const thermalCtx = document.getElementById('thermalTrendChart').getContext('2d');
new Chart(thermalCtx, {
    type: 'line',
    data: {
        labels: timeSeriesData.map(d => d.time),
        datasets: [{
            label: 'Thermal Issues',
            data: timeSeriesData.map(d => d.thermal_issues),
            borderColor: '#f85149',
            backgroundColor: 'rgba(248, 81, 73, 0.1)',
            tension: 0.4,
            fill: true,
            pointRadius: 0
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            y: { 
                beginAtZero: true,
                ticks: { color: '#8b949e' },
                grid: { color: '#30363d' }
            },
            x: { 
                ticks: { 
                    color: '#8b949e',
                    maxTicksLimit: 10
                },
                grid: { color: '#30363d' }
            }
        },
        plugins: {
            legend: { labels: { color: '#8b949e' } }
        }
    }
});

// Power trend chart
const powerCtx = document.getElementById('powerTrendChart').getContext('2d');
new Chart(powerCtx, {
    type: 'line',
    data: {
        labels: timeSeriesData.map(d => d.time),
        datasets: [{
            label: 'Average Power (W)',
            data: timeSeriesData.map(d => d.avg_watts),
            borderColor: '#58a6ff',
            backgroundColor: 'rgba(88, 166, 255, 0.1)',
            tension: 0.4,
            fill: true,
            pointRadius: 0
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            y: { 
                beginAtZero: true,
                ticks: { color: '#8b949e' },
                grid: { color: '#30363d' }
            },
            x: { 
                ticks: { 
                    color: '#8b949e',
                    maxTicksLimit: 10
                },
                grid: { color: '#30363d' }
            }
        },
        plugins: {
            legend: { labels: { color: '#8b949e' } }
        }
    }
});

// GPU trend chart
const gpuCtx = document.getElementById('gpuTrendChart').getContext('2d');
new Chart(gpuCtx, {
    type: 'line',
    data: {
        labels: timeSeriesData.map(d => d.time),
        datasets: [{
            label: 'Average GPU Usage (%)',
            data: timeSeriesData.map(d => d.avg_gpu),
            borderColor: '#7c3aed',
            backgroundColor: 'rgba(124, 58, 237, 0.1)',
            tension: 0.4,
            fill: true,
            pointRadius: 0
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            y: { 
                beginAtZero: true,
                max: 100,
                ticks: { color: '#8b949e' },
                grid: { color: '#30363d' }
            },
            x: { 
                ticks: { 
                    color: '#8b949e',
                    maxTicksLimit: 10
                },
                grid: { color: '#30363d' }
            }
        },
        plugins: {
            legend: { labels: { color: '#8b949e' } }
        }
    }
});

// CPU Load chart with fleet average + top 3 machines
const cpuLoadCtx = document.getElementById('cpuLoadChart').getContext('2d');

new Chart(cpuLoadCtx, {
    type: 'line',
    data: {
        labels: timeSeriesData.map(d => d.time),
        datasets: [
            // Fleet averages (solid lines)
            {
                label: 'Avg Load (1-min)',
                data: timeSeriesData.map(d => d.avg_load_short),
                borderColor: '#3fb950',
                backgroundColor: 'rgba(63, 185, 80, 0.1)',
                tension: 0.4,
                fill: true,
                borderWidth: 1.5,
                pointRadius: 0,
                yAxisID: 'y'
            },
            {
                label: 'Avg Load (5-min)',
                data: timeSeriesData.map(d => d.avg_load_middle),
                borderColor: '#d29922',
                backgroundColor: 'rgba(210, 153, 34, 0.05)',
                tension: 0.4,
                fill: false,
                borderWidth: 1.5,
                pointRadius: 0,
                yAxisID: 'y'
            },
            {
                label: 'Avg Load (15-min)',
                data: timeSeriesData.map(d => d.avg_load_long),
                borderColor: '#58a6ff',
                backgroundColor: 'rgba(88, 166, 255, 0.05)',
                tension: 0.4,
                fill: false,
                borderWidth: 1.5,
                pointRadius: 0,
                yAxisID: 'y'
            },
            // Top 3 machines - 1-min load
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[0].hostname ? timeSeriesData[0].top3_machines[0].hostname + ' (1-min)' : 'Top1 (1-min)',
                data: timeSeriesData.map(d => d.top3_machines[0].load_short),
                borderColor: 'rgba(63, 185, 80, 0.5)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[1].hostname ? timeSeriesData[0].top3_machines[1].hostname + ' (1-min)' : 'Top2 (1-min)',
                data: timeSeriesData.map(d => d.top3_machines[1].load_short),
                borderColor: 'rgba(63, 185, 80, 0.35)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[2].hostname ? timeSeriesData[0].top3_machines[2].hostname + ' (1-min)' : 'Top3 (1-min)',
                data: timeSeriesData.map(d => d.top3_machines[2].load_short),
                borderColor: 'rgba(63, 185, 80, 0.2)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            // Top 3 machines - 5-min load
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[0].hostname ? timeSeriesData[0].top3_machines[0].hostname + ' (5-min)' : 'Top1 (5-min)',
                data: timeSeriesData.map(d => d.top3_machines[0].load_middle),
                borderColor: 'rgba(210, 153, 34, 0.5)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[1].hostname ? timeSeriesData[0].top3_machines[1].hostname + ' (5-min)' : 'Top2 (5-min)',
                data: timeSeriesData.map(d => d.top3_machines[1].load_middle),
                borderColor: 'rgba(210, 153, 34, 0.35)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[2].hostname ? timeSeriesData[0].top3_machines[2].hostname + ' (5-min)' : 'Top3 (5-min)',
                data: timeSeriesData.map(d => d.top3_machines[2].load_middle),
                borderColor: 'rgba(210, 153, 34, 0.2)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            // Top 3 machines - 15-min load
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[0].hostname ? timeSeriesData[0].top3_machines[0].hostname + ' (15-min)' : 'Top1 (15-min)',
                data: timeSeriesData.map(d => d.top3_machines[0].load_long),
                borderColor: 'rgba(88, 166, 255, 0.5)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[1].hostname ? timeSeriesData[0].top3_machines[1].hostname + ' (15-min)' : 'Top2 (15-min)',
                data: timeSeriesData.map(d => d.top3_machines[1].load_long),
                borderColor: 'rgba(88, 166, 255, 0.35)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            },
            {
                label: timeSeriesData.length > 0 && timeSeriesData[0].top3_machines[2].hostname ? timeSeriesData[0].top3_machines[2].hostname + ' (15-min)' : 'Top3 (15-min)',
                data: timeSeriesData.map(d => d.top3_machines[2].load_long),
                borderColor: 'rgba(88, 166, 255, 0.2)',
                pointRadius: 0,
                tension: 0.4,
                fill: false,
                borderWidth: 0.8,
                yAxisID: 'y'
            }
        ]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            y: { 
                type: 'linear',
                display: true,
                position: 'left',
                beginAtZero: true,
                title: { display: true, text: 'Load Average' },
                ticks: { color: '#8b949e' },
                grid: { color: '#30363d' }
            },
            x: { 
                ticks: { 
                    color: '#8b949e',
                    maxTicksLimit: 10
                },
                grid: { color: '#30363d' }
            }
        },
        plugins: {
            legend: { 
                labels: { color: '#8b949e' },
                display: true,
                position: 'left',
                maxWidth: 200,
                maxHeight: 600,
                font: { size: 10 }
            }
        }
    }
});

// Thermal status chart (non-nominal only)
const thermalStatusCtx = document.getElementById('thermalChart').getContext('2d');
new Chart(thermalStatusCtx, {
    type: 'doughnut',
    data: {
        labels: ['Warning / High', 'Critical'],
        datasets: [{
            data: [0, 0],
            backgroundColor: ['#ffd43b', '#f85149'],
            borderWidth: 2,
            borderColor: '#30363d'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: { 
                labels: { color: '#8b949e' },
                position: 'bottom'
            }
        }
    }
});

// CPU usage chart
const cpuMetricsCtx = document.getElementById('cpuChart').getContext('2d');
new Chart(cpuMetricsCtx, {
    type: 'line',
    data: {
        labels: timeSeriesData.map(d => d.time),
        datasets: [{
            label: 'Average CPU Usage (%)',
            data: timeSeriesData.map(d => d.avg_cpu_usage),
            borderColor: '#58a6ff',
            backgroundColor: 'rgba(88, 166, 255, 0.1)',
            tension: 0.4,
            fill: true,
            pointRadius: 0
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            y: { 
                beginAtZero: true,
                max: 100,
                ticks: { color: '#8b949e' },
                grid: { color: '#30363d' }
            },
            x: { 
                ticks: { 
                    color: '#8b949e',
                    maxTicksLimit: 10
                },
                grid: { color: '#30363d' }
            }
        },
        plugins: {
            legend: { labels: { color: '#8b949e' } }
        }
    }
});

// Copy to clipboard function
function copyToClipboard(text, button) {
    navigator.clipboard.writeText(text).then(() => {
        button.classList.add('copied');
        button.textContent = 'Copied!';
        setTimeout(() => {
            button.classList.remove('copied');
            button.textContent = 'Copy';
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy:', err);
        alert('Failed to copy: ' + text);
    });
}
</script>
</body>
</html>
